<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¤ç‰©äººæ ¼åˆ†æ - å‘ç°ä½ çš„å†…åœ¨æ¤ç‰©</title>
    
    <!-- SEOä¸åˆ†äº«ä¼˜åŒ– -->
    <meta name="description" content="åŸºäºMBTIäººæ ¼ç†è®ºçš„è¶£å‘³å¿ƒç†æµ‹è¯•ï¼Œç”¨æ¤ç‰©å®šä¹‰ä½ çš„æ€§æ ¼ç‰¹è´¨ï¼Œç§‘å­¦ä¸¥è°¨åˆä¸å¤±æµªæ¼«">
    <meta property="og:title" content="æ¤ç‰©äººæ ¼åˆ†æ - å‘ç°ä½ çš„å†…åœ¨æ¤ç‰©">
    <meta property="og:description" content="åŸºäºMBTIç†è®ºçš„è¶£å‘³å¿ƒç†æµ‹è¯•ï¼Œç”¨æ¤ç‰©å®šä¹‰ä½ çš„æ€§æ ¼ç‰¹è´¨">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    
    <style>
        /* ============ ä½ åŸæ¥çš„æ‰€æœ‰æ ·å¼ä¿æŒä¸å˜ ============ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f8f9f5 0%, #e8f5e9 100%);
            min-height: 100vh;
            color: #2d3a2d;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* æ¬¢è¿é¡µ */
        .welcome-screen {
            text-align: center;
            padding: 60px 20px;
            animation: fadeIn 0.8s ease;
        }

        .welcome-screen h1 {
            font-size: 2.5em;
            color: #1b5e20;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .welcome-screen p {
            font-size: 1.1em;
            color: #4a6350;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .start-btn {
            background: #1b5e20;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .start-btn:hover {
            background: #2e7d32;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(27, 94, 32, 0.3);
        }

        .start-btn:active {
            transform: translateY(0);
        }

        .start-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-left: 8px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* æµ‹è¯•é¡µ */
        .test-screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #1b5e20;
            width: 0%;
            transition: width 0.5s ease;
        }

        .question-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .question-title {
            font-size: 1.3em;
            color: #1b5e20;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: #f8f9f5;
            border: 2px solid transparent;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .option.selected {
            border-color: #1b5e20;
            background: #c8e6c9;
        }

        .option input[type="radio"] {
            margin-right: 15px;
            pointer-events: none;
        }

        /* ç§»åŠ¨ç«¯è§¦æ‘¸åé¦ˆ */
        @media (hover: none) {
            .option:active {
                transform: scale(0.98);
                background: #e8f5e9;
            }
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-btn {
            background: #4a6350;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #5a7a62;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ç»“æœé¡µ */
        .result-screen {
            display: none;
            animation: fadeIn 0.8s ease;
        }

        .plant-result {
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 30px;
        }

        .plant-icon {
            font-size: 5em;
            margin-bottom: 20px;
            display: inline-block;
            line-height: 1;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .plant-name {
            font-size: 2em;
            color: #1b5e20;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .plant-latin {
            font-style: italic;
            color: #7a8d81;
            margin-bottom: 20px;
        }

        .personality-type {
            background: #e8f5e9;
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 20px;
            color: #1b5e20;
            font-weight: 500;
        }

        .description {
            text-align: left;
            margin: 30px 0;
            line-height: 1.8;
        }

        .traits-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .trait-tag {
            background: #f1f8e9;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.9em;
            color: #2d3a2d;
            border: 1px solid #dcedc8;
        }

        .scientific-note {
            background: #fffde7;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            border-left: 4px solid #ffd54f;
            text-align: left;
        }

        .scientific-note h3 {
            color: #5d4037;
            margin-bottom: 10px;
        }

        .scientific-note p {
            font-size: 0.95em;
            color: #5d4037;
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .restart-btn {
            background: #1b5e20;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            background: #2e7d32;
        }

        .share-btn {
            background: #4a6350;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-btn:hover {
            background: #5a7a62;
        }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å“åº”å¼ */
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .question-container, .plant-result {
                padding: 30px 20px;
            }
            
            .welcome-screen h1 {
                font-size: 2em;
            }
            
            .button-group {
                flex-direction: column;
            }
        }

        /* æç¤ºæ¶ˆæ¯ */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3a2d;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
        }

        /* ç‰ˆæœ¬å·æ˜¾ç¤º - æ–°å¢æ ·å¼ */
        .version-footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            font-size: 0.85em;
            color: #7a8d81;
            border-top: 1px solid rgba(122, 141, 129, 0.2);
        }

        .version-footer a {
            color: #1b5e20;
            text-decoration: none;
            cursor: pointer;
        }

        .version-footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ¬¢è¿é¡µ -->
        <div class="welcome-screen" id="welcomeScreen">
            <h1>ğŸŒ± æ¤ç‰©äººæ ¼åˆ†æ ğŸŒ±</h1>
            <p>åŸºäºMBTIäººæ ¼ç†è®ºçš„ç§‘å­¦ç ”ç©¶ï¼Œæ¶µç›–æƒ…æ„Ÿè¡¨è¾¾ã€çˆ±æƒ…è§‚å¿µã€äººé™…äº¤å¾€ç­‰å¤šç»´åº¦ï¼Œåˆ†æä½ çš„æ€§æ ¼ç‰¹è´¨å¹¶ç”¨ä¸€ç§ç‹¬ç‰¹çš„æ¤ç‰©å®šä¹‰ä½ ã€‚æ¯æ¬¡æµ‹è¯•é¢˜ç›®ä¸åŒï¼Œç»“æœæ›´å…·å‚è€ƒä»·å€¼ã€‚</p>
            <button class="start-btn" id="startBtn" onclick="startTest()">
                <span id="startBtnText">å¼€å§‹æµ‹è¯•</span>
            </button>
            <div style="margin-top: 40px; padding: 20px; background: rgba(255,255,255,0.5); border-radius: 10px;">
                <p style="font-size: 0.9em; color: #666;">ç†è®ºåŸºç¡€ï¼šMBTIï¼ˆè¿ˆå°”æ–¯-å¸ƒé‡Œæ ¼æ–¯ç±»å‹æŒ‡æ ‡ï¼‰æ˜¯åŸºäºå¡å°”Â·è£æ ¼å¿ƒç†ç±»å‹ç†è®ºçš„äººæ ¼åˆ†ç±»ç³»ç»Ÿï¼Œè¢«å¹¿æ³›åº”ç”¨äºå¿ƒç†å­¦ç ”ç©¶å’ŒèŒä¸šå‘å±•é¢†åŸŸã€‚</p>
            </div>
            
            <!-- æ¢å¤è¿›åº¦æç¤º -->
            <div id="restoreNotice" style="margin-top: 20px; padding: 15px; background: #e8f5e9; border-radius: 10px; display: none; cursor: pointer;" onclick="restoreProgress()">
                <p style="color: #1b5e20; font-weight: 500;">æ£€æµ‹åˆ°ä¹‹å‰çš„æµ‹è¯•è¿›åº¦ï¼Œç‚¹å‡»æ¢å¤</p>
                <small style="color: #4a6350;">ä¸Šæ¬¡æµ‹è¯•æ—¶é—´ï¼š<span id="lastTestTime"></span></small>
            </div>
        </div>

        <!-- æµ‹è¯•é¡µ -->
        <div class="test-screen" id="testScreen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="question-container">
                <h2 class="question-title" id="questionTitle"></h2>
                <div class="options" id="optionsContainer"></div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn" onclick="previousQuestion()" disabled>ä¸Šä¸€é¢˜</button>
                <button class="nav-btn" id="nextBtn" onclick="nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <!-- ç»“æœé¡µ -->
        <div class="result-screen" id="resultScreen">
            <div class="plant-result">
                <div class="plant-icon" id="plantIcon"></div>
                <h1 class="plant-name" id="plantName"></h1>
                <p class="plant-latin" id="plantLatin"></p>
                <div class="personality-type" id="personalityType"></div>
                <div class="description" id="description"></div>
                <div class="traits-list" id="traitsList"></div>
                <div class="scientific-note">
                    <h3>ğŸ§¬ ç§‘å­¦ä¾æ®</h3>
                    <p id="scientificBasis"></p>
                </div>
                <div class="button-group">
                    <button class="restart-btn" onclick="restartTest()">é‡æ–°æµ‹è¯•</button>
                    <button class="share-btn" onclick="shareResult()">åˆ†äº«ç»“æœ</button>
                </div>
            </div>
        </div>

        <!-- ç‰ˆæœ¬å·æ˜¾ç¤º - æ–°å¢ -->
        <div class="version-footer" id="versionFooter">
            <p>ç‰ˆæœ¬å·ï¼š<span id="versionNumber">åŠ è½½ä¸­...</span> | 
            é¢˜åº“æ•°é‡ï¼š<span id="questionCount">-</span>é¢˜ | 
            <a onclick="reloadQuestions()">çƒ­æ›´æ–°é¢˜åº“</a></p>
        </div>
    </div>

    <!-- æç¤ºæ¶ˆæ¯ -->
    <div class="toast" id="toast"></div>

    <script>
        // ==================== é…ç½®å‚æ•° ====================
        const QUESTIONS_PER_TEST = 50;
        const STORAGE_KEY = 'plantTest_progress_v1';
        // =================================================

        // ==================== åŠ¨æ€åŠ è½½é¢˜åº“ ====================
        let allQuestions = []; // ä»å¸¸é‡æ”¹ä¸ºå˜é‡
        let questionVersion = '1.0'; // ç‰ˆæœ¬å·ä»JSONè¯»å–

        // åŠ è½½é¢˜åº“å‡½æ•°
        async function loadQuestions() {
            try {
                // åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜
                const response = await fetch('./questions.json?v=' + Date.now());
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // æ£€æŸ¥æ›´æ–°é”
                if (data.updateLock) {
                    console.warn('[Questions] é¢˜åº“æ­£åœ¨ç»´æŠ¤ä¸­');
                    showToast('é¢˜åº“æ­£åœ¨æ›´æ–°ï¼Œè¯·ç¨åå†è¯•', 5000);
                    return false;
                }
                
                questionVersion = data.version || '1.0';
                allQuestions = data.questions || [];
                
                // æ›´æ–°ç‰ˆæœ¬å·æ˜¾ç¤º
                document.getElementById('versionNumber').textContent = questionVersion;
                document.getElementById('questionCount').textContent = allQuestions.length;
                
                console.log(`[Questions] åŠ è½½æˆåŠŸï¼Œç‰ˆæœ¬${questionVersion}ï¼Œå…±${allQuestions.length}é“é¢˜`);
                
                // é¢˜åº“å®Œæ•´æ€§æ£€æŸ¥
                if (allQuestions.length < QUESTIONS_PER_TEST) {
                    console.error('[Questions] é¢˜åº“æ•°é‡ä¸è¶³ï¼Œä½¿ç”¨å¤‡ç”¨é¢˜åº“');
                    showToast('é¢˜åº“åŠ è½½å¼‚å¸¸ï¼Œä½¿ç”¨é»˜è®¤é¢˜ç›®', 5000);
                    loadBackupQuestions();
                }
                
                return true;
            } catch (error) {
                console.error('[Questions] åŠ è½½å¤±è´¥:', error);
                showToast('é¢˜åº“åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é¢˜ç›®', 5000);
                loadBackupQuestions();
                return false;
            }
        }

        // å¤‡ç”¨é¢˜åº“ï¼ˆé˜²æ­¢JSONåŠ è½½å¤±è´¥ï¼‰
        function loadBackupQuestions() {
            allQuestions = [
                {"dimension": "EI", "question": "åœ¨ç¤¾äº¤èšä¼šä¸­ï¼Œä½ é€šå¸¸å¦‚ä½•è¡¨ç°ï¼Ÿ", "options": [{"text": "ä¸»åŠ¨ä¸å¤šäººäº¤è°ˆï¼Œäº«å—æˆä¸ºç„¦ç‚¹", "value": "E"}, {"text": "ä¸å°‘æ•°å‡ ä¸ªäººæ·±å…¥äº¤æµ", "value": "E"}, {"text": "è§‚å¯Ÿä»–äººï¼Œå¶å°”å‚ä¸å¯¹è¯", "value": "I"}, {"text": "æ‰¾å®‰é™çš„è§’è½ï¼ŒæœŸå¾…æ—©ç‚¹ç¦»å¼€", "value": "I"}]},
                {"dimension": "SN", "question": "æè¿°ä¸€æ¬¡æ—…è¡Œç»å†æ—¶ï¼Œä½ ä¼šå¼ºè°ƒï¼Ÿ", "options": [{"text": "å…·ä½“è¡Œç¨‹ã€ç¾é£Ÿå’Œé£æ™¯ç»†èŠ‚", "value": "S"}, {"text": "å®é™…èŠ±è´¹å’Œå®ç”¨å»ºè®®", "value": "S"}, {"text": "æ–‡åŒ–æ„Ÿæ‚Ÿå’Œå¿ƒçµæ”¶è·", "value": "N"}, {"text": "æ—…è¡Œæ„ä¹‰å’Œäººç”Ÿå¯å‘", "value": "N"}]},
                {"dimension": "TF", "question": "åšå†³å®šæ—¶ï¼Œä»€ä¹ˆå¯¹ä½ æ›´é‡è¦ï¼Ÿ", "options": [{"text": "é€»è¾‘åˆ†æå’Œå®¢è§‚äº‹å®", "value": "T"}, {"text": "å…¬å¹³åŸåˆ™å’Œæ•ˆç‡æœ€å¤§åŒ–", "value": "T"}, {"text": "ä¸ªäººä»·å€¼è§‚å’Œä»–äººæ„Ÿå—", "value": "F"}, {"text": "å’Œè°æ°›å›´å’Œæƒ…æ„Ÿå½±å“", "value": "F"}]},
                {"dimension": "JP", "question": "ä½ çš„å·¥ä½œå’Œç”Ÿæ´»ä¹ æƒ¯æ›´å€¾å‘äºï¼Ÿ", "options": [{"text": "åˆ¶å®šè¯¦ç»†è®¡åˆ’å¹¶ä¸¥æ ¼æ‰§è¡Œ", "value": "J"}, {"text": "æœ‰å¤§è‡´æ¡†æ¶ï¼ŒæŒ‰è®¡åˆ’è¿›è¡Œ", "value": "J"}, {"text": "ä¿æŒçµæ´»æ€§ï¼Œéšæ—¶è°ƒæ•´", "value": "P"}, {"text": "éšæ€§è€Œä¸ºï¼Œäº«å—æœªçŸ¥æƒŠå–œ", "value": "P"}]}
            ];
            document.getElementById('versionNumber').textContent = 'å¤‡ç”¨';
            document.getElementById('questionCount').textContent = allQuestions.length;
        }

        // æ‰‹åŠ¨çƒ­æ›´æ–°æŒ‰é’®
        async function reloadQuestions() {
            showToast('æ­£åœ¨æ£€æŸ¥é¢˜åº“æ›´æ–°...', 2000);
            const success = await loadQuestions();
            if (success) {
                showToast(`é¢˜åº“å·²æ›´æ–°è‡³ ${questionVersion}ï¼Œå…±${allQuestions.length}é¢˜`, 3000);
            }
        }
        // =================================================

        // ==================== æ¤ç‰©äººæ ¼æ•°æ®ï¼ˆä¿æŒä¸å˜ï¼‰ ====================
        const plantPersonalities = {
            'INTJ': { name: 'ç™¾å²å…°', latin: 'Welwitschia mirabilis', icon: 'ğŸŒµ', description: 'ä½ å¦‚åŒæ²™æ¼ ä¸­åšéŸ§çš„ç™¾å²å…°ï¼Œç‹¬ç«‹è€Œç†æ€§ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ ä»¥ç‹¬ç‰¹æ–¹å¼è¡¨è¾¾æ·±æƒ…â€”â€”ç”¨è¡ŒåŠ¨è€Œéè¨€è¯­å®ˆæŠ¤æŒšçˆ±ï¼Œä¸ºå…±åŒæœªæ¥ç²¾å¿ƒè§„åˆ’ã€‚ä½ çš„çˆ±æ˜¯æ·±æ²‰è€Œå¯é çš„ï¼Œåƒåœ°åº•æš—æ²³èˆ¬è¡¨é¢é™é»˜ï¼Œå†…é‡Œç‚½çƒ­ã€‚ä½ ä»¥å­¤é«˜çš„å§¿æ€å®ˆæŠ¤å†…å¿ƒçš„åœ£æ®¿ï¼Œåªä¸ºé‚£ä¸ªèƒ½è¯»æ‡‚ä½ æ²‰é»˜çš„äººç»½æ”¾ã€‚', traits: ['æˆ˜ç•¥è¿œè§', 'ç‹¬ç«‹è‡ªä¸»', 'å®Œç¾ä¸»ä¹‰', 'é•¿æœŸä¸»ä¹‰', 'æ·±åº¦ä¸“æ³¨'], scientificBasis: 'INTJï¼ˆå»ºç­‘å¸ˆå‹ï¼‰åœ¨MBTIä¸­å äººå£2%ã€‚ä½ çš„å‰é¢å¶çš®å±‚æ´»è·ƒåº¦è¾ƒé«˜ï¼Œè¿™ä¸å¤æ‚é—®é¢˜è§£å†³å’Œæˆ˜ç•¥è§„åˆ’èƒ½åŠ›ç›¸å…³ã€‚ç¥ç»ç§‘å­¦ç ”ç©¶è¡¨æ˜ï¼Œä½ çš„é»˜è®¤æ¨¡å¼ç½‘ç»œè¿æ¥æ€§ç‹¬ç‰¹ï¼Œä½¿ä½ èƒ½äºå¯‚é™ä¸­æ„å»ºå¤æ‚ç†è®ºï¼Œäºå­¤ç‹¬ä¸­åˆ›é€ ä¸æœ½ä»·å€¼ã€‚' },
            'INTP': { name: 'èŒ…è†èœ', latin: 'Drosera', icon: 'ğŸŒ¿', description: 'ä½ æ˜¯é‚£æ ªæ™ºæ…§è€Œç¥ç§˜çš„èŒ…è†èœï¼Œç”¨é€»è¾‘çš„æ˜¾å¾®é•œè§‚å¯Ÿæƒ…æ„Ÿä¸–ç•Œã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ ç”¨ç†è®ºå’Œåˆ›æ„æ„å»ºç‹¬ç‰¹çš„å…³ç³»æ¨¡å¼ï¼Œä»¥æ–°é¢–è§‚ç‚¹å¯å‘ä¼´ä¾£ã€‚ä½ çš„çˆ±æ˜¯è¯—æ„çš„å®éªŒï¼Œæ˜¯ç†æ€§çš„æµªæ¼«ï¼Œæ˜¯åœ¨å¹³å‡¡ä¸­å‘ç°éå‡¡çš„è‰ºæœ¯ã€‚ä½ æ€»èƒ½ä»ä¸åŒè§’åº¦çœ‹å¾…äº‹ç‰©ï¼Œè®©çˆ±å……æ»¡æ™ºæ…§ä¸æƒŠå–œã€‚', traits: ['é€»è¾‘åˆ†æ', 'åˆ›æ–°æ€ç»´', 'çŸ¥è¯†æ¢ç´¢', 'é€‚åº”æ€§å¼º', 'ç‹¬ç«‹æ€è€ƒ'], scientificBasis: 'INTPï¼ˆé€»è¾‘å­¦å®¶å‹ï¼‰å äººå£3%ã€‚ä½ çš„é»˜è®¤æ¨¡å¼ç½‘ç»œè¿æ¥æ€§æ›´å¼ºï¼Œæ”¯æŒå†…çœå’Œè”æƒ³æ€ç»´ã€‚fMRIæ˜¾ç¤ºä½ åœ¨å‘æ•£æ€ç»´ä»»åŠ¡ä¸­è„‘éƒ¨æ´»åŠ¨å¤šæ ·æ€§é«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨é¢é¡¶è”åˆåŒºï¼ˆTPJï¼‰åŒºåŸŸï¼Œè¿™ä½¿ä½ åœ¨çˆ±æƒ…ä¸­æŒç»­åˆ›é€ æ–°é²œæ„Ÿã€‚' },
            'ENTJ': { name: 'è‘›æ ¹', latin: 'Pueraria lobata', icon: 'ğŸŒ¿', description: 'ä½ å¦‚åŒé‚£åŠ¿ä¸å¯æŒ¡çš„è‘›æ ¹ï¼Œä»¥æœæ–­å’Œè¡ŒåŠ¨åŠ›å¼€æ‹“ç”Ÿå‘½ç–†åŸŸã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ‰§å‰‘çš„éª‘å£«ï¼Œä»¥æœæ•¢å®ˆæŠ¤æŒšçˆ±ï¼›ä½ æ˜¯ç­‘åŸçš„å·¥åŒ ï¼Œç”¨è´£ä»»æ­å»ºåšå®æœªæ¥ã€‚ä½ çš„çˆ±æ˜¯å¾æœï¼Œæ›´æ˜¯åº‡æŠ¤ï¼›æ˜¯å¼•é¢†ï¼Œæ›´æ˜¯æˆå°±ã€‚ä½ è®©æ‰€çˆ±ä¹‹äººå¦‚è—¤è”“æ”€é™„äºä½ åšå®çš„æå¹²ï¼Œå…±åŒæŠµè¾¾æ›´é«˜å¤„ã€‚', traits: ['é¢†å¯¼èƒ½åŠ›', 'æˆ˜ç•¥è¿œè§', 'é«˜æ•ˆæ‰§è¡Œ', 'å†³ç­–æœæ–­', 'ç›®æ ‡å¯¼å‘'], scientificBasis: 'ENTJï¼ˆæŒ‡æŒ¥å®˜å‹ï¼‰çº¦å äººå£3%ã€‚ä½ çš„å¤šå·´èƒºå¥–åŠ±ç³»ç»Ÿæ´»è·ƒåº¦è¶…å¸¸ï¼Œé©±åŠ¨ä½ è¿½æ±‚æˆå°±ä¸æŒæ§ã€‚fMRIç ”ç©¶è¡¨æ˜ï¼Œä½ çš„å‰æ‰£å¸¦çš®å±‚åœ¨å†²çªç›‘æµ‹ä¸­è¡¨ç°å“è¶Šï¼Œä½¿ä½ åœ¨çˆ±æƒ…ä¸­èƒ½å¿«é€Ÿå†³ç­–ï¼Œå¸¦é¢†ä¼´ä¾£ç©¿è¶Šè¿·é›¾æŠµè¾¾ç†æƒ³å½¼å²¸ã€‚' },
            'ENTP': { name: 'æ•è‡è‰', latin: 'Dionaea muscipula', icon: 'ğŸŒ¸', description: 'ä½ æ˜¯é‚£æ ªæœºæ™ºè¿·äººçš„æ•è‡è‰ï¼Œä»¥å·§å¦™é™·é˜±æ•è·æ™ºæ…§ç«èŠ±ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ°¸ä¸ç–²å€¦çš„æ¸¸æˆè€…ï¼Œç”¨åˆ›æ„è°œé¢˜å¸å¼•çµé­‚ä¼´ä¾£ï¼›ä½ æ˜¯è§£æ„ä¼ ç»Ÿçš„è‰ºæœ¯å®¶ï¼Œè®©æ¯ä¸€åˆ»å……æ»¡æƒŠå–œã€‚ä½ çš„çˆ±æ˜¯æ°¸ä¸åœæ­‡çš„æ¢é™©ï¼Œæ˜¯æ™ºåŠ›ä¸æƒ…æ„Ÿçš„åŒé‡å¥é¸£ï¼Œæ˜¯åœ¨å‡¡ä¿—ä¸­åˆ›é€ çš„æ°¸æ’å¥‡è¿¹ã€‚', traits: ['åˆ›æ–°æ€ç»´', 'è¾©è®ºèƒ½åŠ›', 'æœºæ™ºå¹½é»˜', 'é€‚åº”æ€§å¼º', 'å¥½å¥‡å¿ƒæ—ºç››'], scientificBasis: 'ENTPï¼ˆè¾©è®ºå®¶å‹ï¼‰å äººå£5%ã€‚ä½ çš„é¢é¡¶è”åˆåŒºåœ¨å‘æ•£æ€ç»´ä»»åŠ¡ä¸­æ´»è·ƒåº¦æé«˜ï¼Œä½¿ä½ èƒ½åœ¨çˆ±æƒ…ä¸­æŒç»­åˆ›é€ æ–°é²œæ„Ÿã€‚ç ”ç©¶æ˜¾ç¤ºï¼Œä½ çš„å‰è„‘å²›å¯¹æ–°é¢–ç¤¾äº¤çº¿ç´¢å¼‚å¸¸æ•æ„Ÿï¼Œè®©ä½ æˆä¸ºå¤©ç”Ÿçš„é­…åŠ›åˆ¶é€ è€…ï¼Œè®©ä¼´ä¾£çš„ç”Ÿæ´»æ°¸ä¸ä¹å‘³ã€‚' },
            'INFJ': { name: 'èŠ¦èŸ', latin: 'Aloe vera', icon: 'ğŸŒ±', description: 'ä½ å¦‚åŒæœ´å®æ— åçš„èŠ¦èŸï¼Œå†…å¿ƒè•´è—æ²»æ„ˆå¤©åœ°çš„çµè¯ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯é»˜é»˜å®ˆæŠ¤çš„æœˆå…‰ï¼Œä»¥æ— ç§æ¸©æŸ”åŒ…è£¹çˆ±äººçš„ç–²æƒ«ï¼›ä½ æ˜¯æ·±å¤œçš„æ˜ç¯ï¼Œä¸ºè¿·é€”çµé­‚æŒ‡å¼•å½’é€”ã€‚ä½ çš„çˆ±æ˜¯æ²»æ„ˆï¼Œæ˜¯ç†è§£ï¼Œæ˜¯åœ¨æ— å£°å¤„å¬æƒŠé›·çš„æ·±åˆ»æ‡‚å¾—ã€‚ä½ æ‹¥æœ‰è¶…å‡¡å…±æƒ…åŠ›ï¼Œèƒ½æ„ŸçŸ¥ä¼´ä¾£æœªè¯´å‡ºå£çš„éœ€æ±‚ã€‚', traits: ['åŒç†å¿ƒå¼º', 'æ´å¯ŸåŠ›å¼º', 'ç†æƒ³ä¸»ä¹‰', 'æ²»æ„ˆèƒ½åŠ›', 'æ·±æ€ç†Ÿè™‘'], scientificBasis: 'INFJï¼ˆæå€¡è€…å‹ï¼‰ä»…å äººå£1.5%ã€‚ä½ çš„é•œåƒç¥ç»å…ƒç³»ç»Ÿæ´»è·ƒåº¦è¿œè¶…å¸¸äººï¼Œèµ‹äºˆä½ è¶…å‡¡å…±æƒ…èƒ½åŠ›ã€‚fMRIç ”ç©¶è¡¨æ˜ï¼Œä½ çš„é»˜è®¤æ¨¡å¼ç½‘ç»œåœ¨ç†è§£ä»–äººæƒ…ç»ªæ—¶å±•ç°ç‹¬ç‰¹æ¨¡å¼ï¼Œä½¿ä½ èƒ½å¦‚è¯»å¿ƒèˆ¬æ„ŸçŸ¥ä¼´ä¾£éœ€æ±‚ï¼Œæˆä¸ºçˆ±æƒ…ä¸­çš„çµé­‚åŒ»è€…ã€‚' },
            'INFP': { name: 'å«ç¾è‰', latin: 'Mimosa pudica', icon: 'ğŸƒ', description: 'ä½ æ˜¯é‚£æ ªæ•æ„Ÿè¯—æ„çš„å«ç¾è‰ï¼Œå¶ç‰‡è½»é¢¤é—´è—ç€å®‡å®™æ¸©æŸ”ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ˜“ç¢çš„ç‰ç’ƒï¼Œéœ€ä»¥æŸ”è½¯æ‰‹å¿ƒå‘µæŠ¤ï¼›ä½ æ˜¯ä¸ç«­æ³‰æºï¼Œç”¨çº¯çœŸä¸ç†æƒ³æ»‹å…»å…³ç³»çš„æ¯ä¸€å¯¸åœŸå£¤ã€‚ä½ çš„çˆ±æ˜¯å¥‹ä¸é¡¾èº«çš„æŠ•å…¥ï¼Œæ˜¯è‡³çº¯è‡³çœŸçš„å¥‰çŒ®ï¼Œæ˜¯åœ¨å–§åš£ä¸­å®ˆæŠ¤çš„ä¸€ç‰‡å‡€åœŸã€‚', traits: ['ç†æƒ³ä¸»ä¹‰', 'åˆ›æ„ä¸°å¯Œ', 'æƒ…æ„Ÿç»†è…»', 'ä»·å€¼è§‚é©±åŠ¨', 'å†…çœæ·±åˆ»'], scientificBasis: 'INFPï¼ˆè°ƒåœè€…å‹ï¼‰å äººå£4.5%ã€‚ä½ çš„æƒ…ç»ªå¤„ç†ç½‘ç»œï¼ˆæä»æ ¸-å‰é¢å¶è¿æ¥ï¼‰å¼‚å¸¸å‘è¾¾ï¼Œä½¿æƒ…æ„Ÿä½“éªŒå¦‚è¯—æ­Œèˆ¬ä¸°å¯Œã€‚ç¥ç»ç§‘å­¦æ­ç¤ºï¼Œä½ çš„é»˜è®¤æ¨¡å¼ç½‘ç»œåœ¨è‡ªæˆ‘åæ€æ—¶é«˜åº¦æ´»è·ƒï¼Œè®©ä½ åœ¨çˆ±æƒ…ä¸­æ—¢æ˜¯æ·±æƒ…è¯—äººï¼Œä¹Ÿæ˜¯ç†æƒ³ä¸»ä¹‰è¿½æ¢¦äººã€‚' },
            'ENFJ': { name: 'æ©„æ¦„æ ‘', latin: 'Olea europaea', icon: 'ğŸŒ³', description: 'ä½ å¦‚åŒåƒå¹´æ©„æ¦„æ ‘ï¼Œä»¥åšå¤§èƒ¸æ€€è«åº‡ä¸‡ç‰©ï¼Œä»¥æ™ºæ…§å¹´è½®è§è¯æ—¶å…‰ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯å¼•é¢†æ–¹å‘çš„åŒ—æ–—ï¼Œä»¥è¿œè§è§„åˆ’å…±åŒæœªæ¥ï¼›ä½ æ˜¯æ°¸ä¸æ¯ç«­çš„æ³‰æºï¼Œç”¨æŒç»­é¼“åŠ±è®©çˆ±äººèŒå£®æˆé•¿ã€‚ä½ çš„çˆ±æ˜¯æˆå°±ï¼Œæ˜¯å¼•é¢†ï¼Œæ˜¯è®©æ‰€çˆ±ä¹‹äººæˆä¸ºæ›´å¥½çš„è‡ªå·±çš„ä¸ç«­åŠ¨åŠ›ã€‚', traits: ['é¢†å¯¼é­…åŠ›', 'æ¿€åŠ±ä»–äºº', 'å’Œè°è¿½æ±‚', 'é•¿æœŸè§†è§’', 'ç¤¾ä¼šè´£ä»»æ„Ÿ'], scientificBasis: 'ENFJï¼ˆä¸»äººå…¬å‹ï¼‰å äººå£3.5%ã€‚ä½ çš„å‰è„‘å²›çš®å±‚åœ¨è§‚å¯Ÿä»–äººæƒ…ç»ªæ—¶æ¿€æ´»ç¨‹åº¦æé«˜ï¼Œé…åˆå¼ºå¤§çš„é•œåƒç¥ç»å…ƒç³»ç»Ÿï¼Œä½¿ä½ æˆä¸ºå¤©ç”Ÿçš„å…³ç³»åè°ƒè€…ã€‚ç¤¾ä¼šç¥ç»ç§‘å­¦ç ”ç©¶è¡¨æ˜ï¼Œä½ åœ¨çˆ±æƒ…ä¸­æ—¢æ˜¯æ¿€åŠ±è€…ä¹Ÿæ˜¯å®ˆæŠ¤è€…ï¼Œèƒ½å¸¦é¢†ä¼´ä¾£å…±åŒæˆé•¿ã€‚' },
            'ENFP': { name: 'å¹¸è¿ç«¹', latin: 'Dracaena sanderiana', icon: 'ğŸ‹', description: 'ä½ æ˜¯é‚£ä¸€ç«¿æŸ”éŸ§çš„å¹¸è¿ç«¹ï¼Œåœ¨ä»»ä½•ç¯å¢ƒéƒ½èƒ½èˆ’å±•ç”Ÿå‘½ç»¿æ„ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ°¸ä¸ç–²å€¦çš„æ¢é™©å®¶ï¼Œç”¨æ— ç©·æƒ³è±¡åŠ›ä¸ºå¹³å‡¡æ—¥å­é•€ä¸Šé‡‘è¾¹ï¼›ä½ æ˜¯ä¼ é€’å¿«ä¹çš„ç²¾çµï¼Œæ€»èƒ½åœ¨é˜´éœ¾ä¸­å‘ç°å½©è™¹ã€‚ä½ çš„çˆ±æ˜¯è‡ªç”±ï¼Œæ˜¯åˆ›é€ ï¼Œæ˜¯æºæ‰‹å…±èµ´çš„æ°¸æ— æ­¢å¢ƒçš„å¥‡å¦™æ—…ç¨‹ã€‚', traits: ['çƒ­æƒ…æ´‹æº¢', 'åˆ›æ„æ— é™', 'é€‚åº”åŠ›å¼º', 'ç¤¾äº¤èƒ½åŠ›', 'ä¹è§‚ç§¯æ'], scientificBasis: 'ENFPï¼ˆç«é€‰è€…å‹ï¼‰å äººå£7.5%ã€‚ä½ çš„èƒŒå¤–ä¾§å‰é¢å¶çš®å±‚ä¸è¾¹ç¼˜ç³»ç»Ÿè¿æ¥ç‹¬ç‰¹ï¼Œä½¿åˆ›é€ æ€§æ€ç»´ä¸æƒ…æ„Ÿæ·±åº¦å®Œç¾ç»“åˆã€‚ç¥ç»å½±åƒå­¦æ˜¾ç¤ºï¼Œä½ çš„å¥–èµç³»ç»Ÿå¯¹ç§¯æç¤¾äº¤ä½“éªŒæåº¦æ•æ„Ÿï¼Œè®©ä½ åœ¨çˆ±æƒ…ä¸­æ—¢æ˜¯å¿«ä¹æºæ³‰ï¼Œä¹Ÿæ˜¯åˆ›æ„å¼•æ“ã€‚' },
            'ISTJ': { name: 'é“¶æ', latin: 'Ginkgo biloba', icon: 'ğŸ‚', description: 'ä½ å¦‚ç©¿è¶Šäº¿ä¸‡å¹´æ—¶å…‰çš„å¤é“¶æï¼Œä»¥ä¸å˜å§¿æ€å®ˆæŠ¤å²æœˆæ‰¿è¯ºã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ°¸æ’ç¯å¡”ï¼Œä»¥ç¨³å®šç…§äº®æŒ‡å¼•è¿·èˆªï¼›ä½ æ˜¯å¤è€å¥‘çº¦ï¼Œæ¯ä¸€å¥èª“è¨€éƒ½é•Œåˆ»å¹´è½®æ·±å¤„ã€‚ä½ çš„çˆ±æ˜¯æ²‰é»˜åšå®ˆï¼Œæ˜¯æ— å£°ä»˜å‡ºï¼Œæ˜¯åœ¨æ—¶å…‰æµè½¬ä¸­æ°¸ä¸è¤ªè‰²çš„å¿ è¯šã€‚', traits: ['è´£ä»»æ„Ÿå¼º', 'ç²¾å‡†å¯é ', 'ä¼ ç»Ÿä»·å€¼', 'ç§©åºäº•ç„¶', 'è®°å¿†åŠ›ä½³'], scientificBasis: 'ISTJï¼ˆç‰©æµå¸ˆå‹ï¼‰å äººå£12%ã€‚ä½ çš„æ‰§è¡Œæ§åˆ¶ç½‘ç»œï¼ˆECNï¼‰æ´»åŠ¨ä¸€è‡´æ€§æé«˜ï¼Œä½¿ä½ åœ¨çˆ±æƒ…ä¸­æˆä¸ºå€¼å¾—ä¿¡èµ–çš„ä¼´ä¾£ã€‚è®¤çŸ¥ç¥ç»ç§‘å­¦ç ”ç©¶è¡¨æ˜ï¼Œä½ çš„æµ·é©¬ä½“ä¸å‰é¢å¶è¿æ¥å¼ºå¤§ï¼Œè®©ä½ èƒ½é“­è®°é‡è¦æ—¶åˆ»ï¼Œå°†æ‰¿è¯ºåŒ–ä¸ºæ°¸æ’ã€‚' },
            'ISFJ': { name: 'è–°è¡£è‰', latin: 'Lavandula', icon: 'ğŸŒ¾', description: 'ä½ æ˜¯é‚£ä¸›æ¸©æŸ”åšéŸ§çš„è–°è¡£è‰ï¼Œä»¥ç´«è‰²æµªæ¼«ç–—æ„ˆä¸–ç•Œç–²æƒ«ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ°¸ä¸ç†„ç­çš„æš–ç‚‰ï¼Œç”¨æŒç»­æ¸©æŸ”é©±æ•£ç”Ÿæ´»å¯’æ„ï¼›ä½ æ˜¯çè—è®°å¿†çš„é¦™å›Šï¼Œå°†æ¯ä¸€åˆ»ç¾å¥½é…¿æˆæ°¸æ’èŠ¬èŠ³ã€‚ä½ çš„çˆ±æ˜¯å®ˆæŠ¤ï¼Œæ˜¯æ²»æ„ˆï¼Œæ˜¯åœ¨å¹³å‡¡ä¸­åˆ›é€ çš„ä¸å‡¡æ¸©æƒ…ã€‚', traits: ['å…³æ€€ä»–äºº', 'å’Œè°è¿½æ±‚', 'è®°å¿†åŠ›å¼º', 'å®è·µæ€§å¼º', 'å¿ è¯šå¯é '], scientificBasis: 'ISFJï¼ˆå®ˆå«è€…å‹ï¼‰å äººå£9%ã€‚ä½ çš„é»˜è®¤æ¨¡å¼ç½‘ç»œåœ¨å¤„ç†ç¤¾ä¼šæ€§åˆºæ¿€æ—¶è¡¨ç°å‡ºç¨³å®šæƒ…æ„Ÿå…³æ€€æ¨¡å¼ã€‚ç¥ç»å½±åƒå­¦ç ”ç©¶æ˜¾ç¤ºï¼Œä½ çš„å‰è„‘å²›çš®å±‚å¯¹ä¼´ä¾£éœ€æ±‚æåº¦æ•æ„Ÿï¼Œè®©ä½ æˆä¸ºçˆ±æƒ…ä¸­çš„å¤©ç„¶å®ˆæŠ¤è€…ï¼Œä»¥ç»†è…»ä½“è´´åˆ›é€ æŒä¹…æ¸©æš–ã€‚' },
            'ESTJ': { name: 'ç«¹å­', latin: 'Bambusoideae', icon: 'ğŸ‹', description: 'ä½ å¦‚æŒºæ‹”ç¿ ç«¹ï¼Œä»¥èŠ‚èŠ‚æ”€å‡å§¿æ€è¿½æ±‚å“è¶Šã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ„ç­‘å®¶å›­çš„å·¥åŒ ï¼Œç”¨è¡ŒåŠ¨æ­å»ºåšå®æœªæ¥ï¼›ä½ æ˜¯åˆ¶å®šèˆªç¨‹çš„èˆµæ‰‹ï¼Œå¸¦é¢†ä¼´ä¾£ç©¿è¶Šé£æµªæŠµè¾¾ç†æƒ³æ¸¯æ¹¾ã€‚ä½ çš„çˆ±æ˜¯è¡ŒåŠ¨ï¼Œæ˜¯è´£ä»»ï¼Œæ˜¯å°†æ‰¿è¯ºåŒ–ä¸ºæ¯ä¸€å¤©å…·ä½“ä»˜å‡ºçš„å¯é ã€‚', traits: ['ç»„ç»‡èƒ½åŠ›', 'é«˜æ•ˆæ‰§è¡Œ', 'å†³ç­–æœæ–­', 'ç§©åºæ„Ÿå¼º', 'é¢†å¯¼èƒ½åŠ›'], scientificBasis: 'ESTJï¼ˆæ€»ç»ç†å‹ï¼‰å äººå£11%ã€‚ä½ çš„å‰æ‰£å¸¦çš®å±‚ï¼ˆACCï¼‰åœ¨å†²çªç›‘æµ‹ä¸­å¼‚å¸¸æ´»è·ƒï¼Œä½¿ä½ èƒ½å¿«é€Ÿè§£å†³çˆ±æƒ…ä¸­çš„é—®é¢˜ã€‚ç ”ç©¶è¡¨æ˜ï¼Œä½ çš„æ‰§è¡Œæ§åˆ¶ç½‘ç»œè®©ä½ åœ¨å…³ç³»ä¸­æ—¢èƒ½æœæ–­å†³ç­–ï¼Œåˆèƒ½æ‰¿æ‹…è´£ä»»ï¼Œæˆä¸ºä¼´ä¾£ä¿¡èµ–çš„ä¾é ã€‚' },
            'ESFJ': { name: 'å‘æ—¥è‘µ', latin: 'Helianthus annuus', icon: 'ğŸŒ»', description: 'ä½ æ˜¯é‚£æœµè¿½éšå…‰æ˜çš„å‘æ—¥è‘µï¼Œä»¥ç¿çƒ‚ç¬‘å®¹æ¸©æš–ä¸–ç•Œã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯è¥é€ æ¸©é¦¨çš„é­”æ³•å¸ˆï¼Œå°†å¹³å‡¡æ—¥å­è¿‡æˆè¯—ï¼›ä½ æ˜¯å‡èšæƒ…æ„Ÿçš„ç£çŸ³ï¼Œè®©ä¸¤é¢—å¿ƒç´§å¯†ç›¸ä¾ã€‚ä½ çš„çˆ±æ˜¯å¥‰çŒ®ï¼Œæ˜¯åŒ…å®¹ï¼Œæ˜¯åˆ›é€ å’Œè°å¹¸ç¦çš„ä¸ç«­åŠ¨åŠ›ã€‚', traits: ['ç¤¾äº¤èƒ½åŠ›å¼º', 'åˆä½œç²¾ç¥', 'å…³æ€€ä»–äºº', 'ä¹è§‚ç§¯æ', 'ç»„ç»‡æ‰èƒ½'], scientificBasis: 'ESFJï¼ˆæ‰§æ”¿å®˜å‹ï¼‰å äººå£12%ã€‚ä½ çš„é¢ä¸Šæ²Ÿï¼ˆSTSï¼‰åœ¨é¢éƒ¨æƒ…ç»ªè¯†åˆ«ä¸­å‡†ç¡®ç‡æé«˜ï¼Œé…åˆå¼ºå¤§çš„é•œåƒç¥ç»å…ƒç³»ç»Ÿï¼Œä½¿ä½ å¦‚é˜³å…‰èˆ¬ç…§äº®ä¼´ä¾£å¿ƒæƒ…ã€‚ç¤¾ä¼šå¿ƒç†å­¦ç ”ç©¶æ˜¾ç¤ºï¼Œä½ æ˜¯çˆ±æƒ…ä¸­çš„å¤©ç„¶åè°ƒè€…ï¼Œä»¥å…³æ€€ä¸ä½“è´´è¥é€ æŒä¹…å’Œè°ã€‚' },
            'ISTP': { name: 'ä»™äººæŒ', latin: 'Cactaceae', icon: 'ğŸŒµ', description: 'ä½ å¦‚å­¤å‚²è‡ªåœ¨çš„ä»™äººæŒï¼Œåœ¨æ²™æ¼ ä¸­æ¼”ç»è‡ªç»™è‡ªè¶³ç¾å­¦ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ²‰é»˜å®ˆæŠ¤è€…ï¼Œç”¨è¡ŒåŠ¨è€Œéè¨€è¯­è¡¨è¾¾æ·±æƒ…ï¼›ä½ æ˜¯å¯é æŠ€å¸ˆï¼Œæ€»èƒ½åœ¨ç”Ÿæ´»å‡ºæ•…éšœæ—¶å¦™æ‰‹å›æ˜¥ã€‚ä½ çš„çˆ±æ˜¯ä½è°ƒçš„å¯é ï¼Œæ˜¯é™é»˜çš„å®ˆæŠ¤ï¼Œæ˜¯åœ¨å…³é”®æ—¶åˆ»æŒºèº«è€Œå‡ºçš„è‹±é›„ä¸»ä¹‰ã€‚', traits: ['å®è·µèƒ½åŠ›å¼º', 'å†·é™ç†æ€§', 'é€‚åº”åŠ›å¼º', 'ç‹¬ç«‹è‡ªä¸»', 'é—®é¢˜è§£å†³'], scientificBasis: 'ISTPï¼ˆé‰´èµå®¶å‹ï¼‰å äººå£6%ã€‚ä½ çš„æ„Ÿè§‰è¿åŠ¨çš®å±‚ä¸é¡¶å¶çš®å±‚è¿æ¥ç‹¬ç‰¹ï¼Œèµ‹äºˆä½ å‡ºè‰²æ“ä½œæŠ€èƒ½ã€‚ç¥ç»ç§‘å­¦ç ”ç©¶è¡¨æ˜ï¼Œä½ åœ¨çˆ±æƒ…ä¸­æ—¢æ˜¯æ²‰é»˜è¡ŒåŠ¨è€…ï¼Œä¹Ÿæ˜¯å¯é å®ˆæŠ¤è€…ï¼Œä»¥å®ç”¨ä¸»ä¹‰åˆ›é€ ç¨³å¥å…³ç³»ã€‚' },
            'ISFP': { name: 'å…°èŠ±', latin: 'Orchidaceae', icon: 'ğŸŒº', description: 'ä½ æ˜¯é‚£æœµç‹¬ç‰¹ä¼˜é›…çš„å…°èŠ±ï¼Œä»¥ä¸å¯æ€è®®çš„ç¾ä¸½è¯ é‡Šç”Ÿå‘½é«˜è´µã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯è¿½æ±‚çº¯ç²¹ç¾å­¦çš„è¯—äººï¼Œå°†æƒ…æ„ŸåŒ–ä¸ºè§†è§‰ä¸å¬è§‰çš„ç››å®´ï¼›ä½ æ˜¯æ´»åœ¨å½“ä¸‹çš„å“²å­¦å®¶ï¼Œè®©æ¯ä¸€ä¸ªç›¸è§†è€Œç¬‘çš„ç¬é—´éƒ½æˆä¸ºæ°¸æ’ã€‚ä½ çš„çˆ±æ˜¯ç¾çš„åˆ›é€ ï¼Œæ˜¯æ„Ÿå®˜çš„è¯—ç¯‡ã€‚', traits: ['è‰ºæœ¯æ„ŸçŸ¥', 'å®¡ç¾ç‹¬ç‰¹', 'å’Œè°è¿½æ±‚', 'æ´»åœ¨å½“ä¸‹', 'æ•æ„Ÿç»†è…»'], scientificBasis: 'ISFPï¼ˆæ¢é™©å®¶å‹ï¼‰å äººå£7%ã€‚ä½ çš„è§†è§‰çš®å±‚ä¸è¾¹ç¼˜ç³»ç»Ÿè¿æ¥å¼‚å¸¸å‘è¾¾ï¼Œä½¿æ„Ÿå®˜è¾“å…¥åŒ–ä¸ºæƒ…æ„Ÿç¾å­¦ä½“éªŒã€‚fMRIç ”ç©¶æ˜¾ç¤ºï¼Œä½ çš„å®¡ç¾æ„ŸçŸ¥ç½‘ç»œé«˜åº¦æ•´åˆï¼Œè®©ä½ åœ¨çˆ±æƒ…ä¸­æ—¢æ˜¯ç¾çš„åˆ›é€ è€…ï¼Œä¹Ÿæ˜¯æƒ…æ„Ÿçš„é‰´èµå®¶ã€‚' },
            'ESTP': { name: 'è—¤è”“', latin: 'Liana', icon: 'ğŸŒ¿', description: 'ä½ å¦‚æŸ”éŸ§è¿…çŒ›çš„è—¤è”“ï¼Œä»¥æƒŠäººé€‚åº”èƒ½åŠ›æ”€ç¼˜ç”Ÿå‘½æ¯ä¸€ä¸ªæœºé‡ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯åˆ¶é€ æƒŠå–œçš„é­”æœ¯å¸ˆï¼Œæ€»èƒ½è®©å¹³å‡¡æ—¥å­é—ªè€€ç«èŠ±ï¼›ä½ æ˜¯å¼•é¢†å†’é™©çš„èˆ¹é•¿ï¼Œä¸çˆ±äººå…±èµ´æœªçŸ¥è“æµ·ã€‚ä½ çš„çˆ±æ˜¯æ¿€æƒ…ï¼Œæ˜¯ä½“éªŒï¼Œæ˜¯åœ¨æ¯ä¸€ä¸ªå½“ä¸‹åˆ»ä¸‹æœ€æ·±å°è®°çš„å‹‡æ•¢ã€‚', traits: ['è¡ŒåŠ¨åŠ›å¼º', 'åº”å˜å¿«é€Ÿ', 'å®è·µæ™ºæ…§', 'å†’é™©ç²¾ç¥', 'ç¤¾äº¤èƒ½åŠ›'], scientificBasis: 'ESTPï¼ˆä¼ä¸šå®¶å‹ï¼‰å äººå£5%ã€‚ä½ çš„å¤šå·´èƒºå¥–èµç³»ç»Ÿå¯¹åˆºæ¿€æåº¦æ•æ„Ÿï¼Œé©±ä½¿ä½ ä¸æ–­å¯»æ±‚æ–°é²œä½“éªŒã€‚ç ”ç©¶è¡¨æ˜ï¼Œä½ åœ¨çˆ±æƒ…ä¸­æ—¢æ˜¯å†’é™©å¼•é¢†è€…ï¼Œä¹Ÿæ˜¯å¿«ä¹åˆ¶é€ è€…ï¼Œä»¥å®è·µæ™ºæ…§å’Œè¡ŒåŠ¨åŠ›åˆ›é€ å……æ»¡æ´»åŠ›å…³ç³»ã€‚' },
            'ESFP': { name: 'éƒé‡‘é¦™', latin: 'Tulipa', icon: 'ğŸŒ·', description: 'ä½ æ˜¯æ—©æ˜¥æœ€æ—©ç»½æ”¾çš„éƒé‡‘é¦™ï¼Œä»¥æ— ä¸ä¼¦æ¯”çƒ­æƒ…å®£å‘Šç”Ÿå‘½å–œæ‚¦ã€‚åœ¨çˆ±æƒ…ä¸­ï¼Œä½ æ˜¯æ°¸ä¸ç–²å€¦çš„è¡¨æ¼”è€…ï¼Œç”¨çƒ­æƒ…å’Œåˆ›æ„ç‚¹äº®æ¯ä¸€å¤©ï¼›ä½ æ˜¯ä¼ é€’å¿«ä¹çš„ä½¿è€…ï¼Œè®©çˆ±åœ¨æ¬¢å£°ç¬‘è¯­ä¸­å¦‚èŠ±ç»šçƒ‚ã€‚ä½ çš„çˆ±æ˜¯å…‰èŠ’ï¼Œæ˜¯æ¸©åº¦ï¼Œæ˜¯æºæ‰‹å…±èˆçš„æ°¸ä¸è½å¹•çš„ç››å®´ã€‚', traits: ['çƒ­æƒ…æ´»åŠ›', 'è¡¨ç°åŠ›ä½³', 'ä¹è§‚å¼€æœ—', 'ç¤¾äº¤èƒ½åŠ›', 'å½“ä¸‹æ¬¢æ„‰'], scientificBasis: 'ESFPï¼ˆè¡¨æ¼”è€…å‹ï¼‰å äººå£7.5%ã€‚ä½ çš„å¥–èµç³»ç»Ÿä¸æƒ…æ„Ÿå¤„ç†åŒºåŸŸåŸºçº¿æ´»åŠ¨æ°´å¹³è¾ƒé«˜ï¼Œä½¿ä½ å¯¹ç§¯æç¤¾äº¤ä½“éªŒæä¸ºæ•æ„Ÿã€‚ç¥ç»ç§‘å­¦ç ”ç©¶è¡¨æ˜ï¼Œä½ åœ¨çˆ±æƒ…ä¸­æ—¢æ˜¯å¿«ä¹æºæ³‰ï¼Œä¹Ÿæ˜¯ç¤¾äº¤ç£çŸ³ï¼Œä»¥æ„ŸæŸ“åŠ›åˆ›é€ å……æ»¡æ¬¢ç¬‘çš„å…³ç³»ã€‚' }
        };
        // =================================================

        // æµ‹è¯•çŠ¶æ€
        let currentQuestion = 0;
        let answers = {};
        let selectedQuestions = [];

        // ==================== ç›‘æ§åŸ‹ç‚¹ ====================
        function trackEvent(eventName, params = {}) {
            console.log(`[Track] ${eventName}`, params);
        }
        // =================================================

        // ==================== æœ¬åœ°å­˜å‚¨ ====================
        // ä¿å­˜è¿›åº¦
        function saveProgress() {
            const progressData = {
                timestamp: Date.now(),
                currentQuestion,
                answers,
                selectedQuestions,
                questionCount: selectedQuestions.length,
                version: questionVersion // ä¿å­˜ç‰ˆæœ¬å·
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(progressData));
            console.log('[Storage] è¿›åº¦å·²ä¿å­˜');
        }

        // æ£€æŸ¥æ˜¯å¦æœ‰å¯æ¢å¤è¿›åº¦
        function checkRestoreProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (!saved) return false;

            try {
                const data = JSON.parse(saved);
                const age = Date.now() - data.timestamp;
                const maxAge = 24 * 60 * 60 * 1000;

                if (age > maxAge) {
                    localStorage.removeItem(STORAGE_KEY);
                    return false;
                }

                // ç‰ˆæœ¬ä¸åŒ¹é…æ—¶ä¸æ¢å¤
                if (data.version && data.version !== questionVersion) {
                    console.log('[Storage] ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œä¸æ¢å¤è¿›åº¦');
                    return false;
                }

                const notice = document.getElementById('restoreNotice');
                const timeStr = new Date(data.timestamp).toLocaleString('zh-CN');
                document.getElementById('lastTestTime').textContent = timeStr;
                notice.style.display = 'block';

                trackEvent('restore_available', { age: Math.floor(age / 60000) + 'åˆ†é’Ÿ' });
                return true;
            } catch (e) {
                console.error('[Storage] è§£æå¤±è´¥:', e);
                localStorage.removeItem(STORAGE_KEY);
                return false;
            }
        }

        // æ¢å¤è¿›åº¦
        function restoreProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (!saved) return;

            try {
                const data = JSON.parse(saved);
                currentQuestion = data.currentQuestion;
                answers = data.answers;
                selectedQuestions = data.selectedQuestions;

                document.getElementById('welcomeScreen').style.display = 'none';
                document.getElementById('testScreen').style.display = 'block';
                showQuestion();

                trackEvent('progress_restored', { questionCount: selectedQuestions.length });
                showToast('è¿›åº¦æ¢å¤æˆåŠŸï¼ç»§ç»­ç­”é¢˜å§');
            } catch (e) {
                console.error('[Storage] æ¢å¤å¤±è´¥:', e);
                localStorage.removeItem(STORAGE_KEY);
            }
        }

        // æ¸…é™¤è¿›åº¦
        function clearProgress() {
            localStorage.removeItem(STORAGE_KEY);
            console.log('[Storage] è¿›åº¦å·²æ¸…é™¤');
        }
        // =================================================

        // ==================== éšæœºæŠ½é¢˜ç®—æ³• ====================
        // Fisher-Yatesæ´—ç‰Œç®—æ³•
        function shuffleArray(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // æŠ½å–é¢˜ç›®
        function getRandomQuestions(count = QUESTIONS_PER_TEST) {
            if (count > allQuestions.length) {
                console.warn('[Questions] è¯·æ±‚æ•°é‡è¶…è¿‡é¢˜åº“ï¼Œè¿”å›å…¨éƒ¨é¢˜ç›®');
                return shuffleArray(allQuestions);
            }

            const shuffled = shuffleArray(allQuestions);
            const selected = shuffled.slice(0, count);
            
            // éªŒè¯å”¯ä¸€æ€§
            const usedQuestions = new Set();
            selected.forEach((q, i) => {
                const key = `${q.dimension}-${q.question.substring(0, 20)}`;
                if (usedQuestions.has(key)) {
                    console.error('[Questions] è­¦å‘Šï¼šæ£€æµ‹åˆ°å¯èƒ½çš„é‡å¤é¢˜ç›®', key);
                }
                usedQuestions.add(key);
            });
            
            return selected;
        }
        // =================================================

        // ==================== UIäº¤äº’ ====================
        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message, duration = 3000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // æ›´æ–°æŒ‰é’®åŠ è½½çŠ¶æ€
        function setButtonLoading(buttonId, isLoading) {
            const btn = document.getElementById(buttonId);
            const text = document.getElementById(buttonId + 'Text');
            
            if (isLoading) {
                btn.disabled = true;
                text.innerHTML = 'é¢˜ç›®ç”Ÿæˆä¸­<span class="loading-spinner"></span>';
            } else {
                btn.disabled = false;
                text.textContent = 'å¼€å§‹æµ‹è¯•';
            }
        }
        // =================================================

        // å¼€å§‹æµ‹è¯•
        async function startTest() {
            // æ£€æŸ¥é¢˜åº“æ˜¯å¦åŠ è½½å®Œæˆ
            if (allQuestions.length === 0) {
                showToast('é¢˜åº“æ­£åœ¨åŠ è½½ä¸­ï¼Œè¯·ç¨å€™...', 2000);
                return;
            }

            trackEvent('test_start', { 
                questionCount: QUESTIONS_PER_TEST,
                version: questionVersion 
            });
            
            setButtonLoading('startBtn', true);
            
            // æ¨¡æ‹Ÿå¼‚æ­¥åŠ è½½
            await new Promise(resolve => setTimeout(resolve, 500));
            
            selectedQuestions = getRandomQuestions(QUESTIONS_PER_TEST);
            
            // éªŒè¯é¢˜ç›®å”¯ä¸€æ€§
            const ids = selectedQuestions.map((q, i) => `${q.dimension}-${i}`);
            const unique = new Set(ids);
            if (unique.size !== selectedQuestions.length) {
                console.error('[Questions] æ£€æµ‹åˆ°é‡å¤é¢˜ç›®ï¼');
                trackEvent('question_duplicate_error');
            }
            
            currentQuestion = 0;
            answers = {};
            
            setButtonLoading('startBtn', false);
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('testScreen').style.display = 'block';
            showQuestion();
            
            // è‡ªåŠ¨ä¿å­˜è¿›åº¦ï¼ˆæ¯5ç§’ï¼‰
            setInterval(() => {
                if (Object.keys(answers).length > 0) {
                    saveProgress();
                }
            }, 5000);
        }

        // æ˜¾ç¤ºé—®é¢˜
        function showQuestion() {
            const question = selectedQuestions[currentQuestion];
            document.getElementById('questionTitle').textContent = 
                `é—®é¢˜ ${currentQuestion + 1}/${selectedQuestions.length}: ${question.question}`;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.onclick = () => selectOption(index, option.value);
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `question${currentQuestion}`;
                radio.id = `option${index}`;
                radio.value = option.value;
                
                const label = document.createElement('label');
                label.htmlFor = `option${index}`;
                label.textContent = option.text;
                label.style.flex = '1';
                label.style.cursor = 'pointer';
                
                optionDiv.appendChild(radio);
                optionDiv.appendChild(label);
                optionsContainer.appendChild(optionDiv);
            });
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentQuestion + 1) / selectedQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = true;
            
            // æ¢å¤å·²é€‰ç­”æ¡ˆ
            if (answers[currentQuestion] !== undefined) {
                const savedAnswer = answers[currentQuestion];
                const optionIndex = question.options.findIndex(opt => opt.value === savedAnswer);
                if (optionIndex !== -1) {
                    selectOption(optionIndex, savedAnswer);
                }
            }
        }

        // é€‰æ‹©é€‰é¡¹
        function selectOption(index, value) {
            // æ¸…é™¤ä¹‹å‰é€‰æ‹©
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
            
            // æ ‡è®°å½“å‰é€‰æ‹©
            const selectedElement = document.querySelectorAll('.option')[index];
            selectedElement.classList.add('selected');
            selectedElement.querySelector('input[type="radio"]').checked = true;
            
            // å­˜å‚¨ç­”æ¡ˆï¼ˆæŒ‰é¢˜ç›®ç´¢å¼•ï¼‰
            answers[currentQuestion] = value;
            
            // å¯ç”¨ä¸‹ä¸€é¢˜
            document.getElementById('nextBtn').disabled = false;
            
            // è‡ªåŠ¨ä¿å­˜
            saveProgress();
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (currentQuestion < selectedQuestions.length - 1) {
                currentQuestion++;
                showQuestion();
                trackEvent('question_next', { current: currentQuestion + 1, total: selectedQuestions.length });
            } else {
                showResult();
            }
        }

        // ä¸Šä¸€é¢˜
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
                trackEvent('question_prev', { current: currentQuestion + 1, total: selectedQuestions.length });
            }
        }

        // è®¡ç®—MBTIç»“æœ
        function calculateResult() {
            const dimensionScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            
            // ç»Ÿè®¡æ¯ä¸ªç»´åº¦çš„ç­”æ¡ˆ
            Object.entries(answers).forEach(([questionIndex, answerValue]) => {
                const question = selectedQuestions[parseInt(questionIndex)];
                if (!question) {
                    console.warn('[Result] é¢˜ç›®ç´¢å¼•æ— æ•ˆ:', questionIndex);
                    return;
                }
                
                const { dimension } = question;
                if (!['E', 'I', 'S', 'N', 'T', 'F', 'J', 'P'].includes(answerValue)) {
                    console.warn('[Result] æ— æ•ˆçš„ç­”æ¡ˆå€¼:', answerValue);
                    return;
                }
                
                if (dimension === 'EI' && ['E', 'I'].includes(answerValue)) {
                    dimensionScores[answerValue]++;
                } else if (dimension === 'SN' && ['S', 'N'].includes(answerValue)) {
                    dimensionScores[answerValue]++;
                } else if (dimension === 'TF' && ['T', 'F'].includes(answerValue)) {
                    dimensionScores[answerValue]++;
                } else if (dimension === 'JP' && ['J', 'P'].includes(answerValue)) {
                    dimensionScores[answerValue]++;
                }
            });
            
            // è®¡ç®—å®Œæˆåº¦
            const answeredCount = Object.keys(answers).length;
            const completionRate = answeredCount / selectedQuestions.length;
            
            if (completionRate < 0.8) {
                console.warn(`[Result] å®Œæˆåº¦ä¸è¶³: ${(completionRate * 100).toFixed(1)}%`);
                showToast('æç¤ºï¼šè¿˜æœ‰æœªå®Œæˆçš„é¢˜ç›®ï¼Œç»“æœå¯èƒ½ä¸å¤Ÿå‡†ç¡®', 5000);
            }
            
            // ç¡®å®šæ¯ä¸ªç»´åº¦
            const result = {
                EI: dimensionScores.E >= dimensionScores.I ? 'E' : 'I',
                SN: dimensionScores.S >= dimensionScores.N ? 'S' : 'N',
                TF: dimensionScores.T >= dimensionScores.F ? 'T' : 'F',
                JP: dimensionScores.J >= dimensionScores.P ? 'J' : 'P'
            };
            
            // å¤„ç†å¹³å±€
            if (dimensionScores.E === dimensionScores.I) result.EI = 'I';
            if (dimensionScores.S === dimensionScores.N) result.SN = 'N';
            if (dimensionScores.T === dimensionScores.F) result.TF = 'F';
            if (dimensionScores.J === dimensionScores.P) result.JP = 'P';
            
            // ç”Ÿæˆæœ€ç»ˆç±»å‹
            const finalType = result.EI + result.SN + result.TF + result.JP;
            
            // æ ¡éªŒç±»å‹æ˜¯å¦å­˜åœ¨
            if (!plantPersonalities[finalType]) {
                console.error('[Result] è®¡ç®—å‡ºçš„ç±»å‹ä¸å­˜åœ¨:', finalType);
                trackEvent('result_type_error', { type: finalType });
                return 'ESFJ';
            }
            
            trackEvent('result_calculated', { 
                type: finalType, 
                completionRate: completionRate,
                scores: dimensionScores 
            });
            
            return finalType;
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            trackEvent('test_complete', { totalQuestions: selectedQuestions.length });
            
            const personalityType = calculateResult();
            const plantData = plantPersonalities[personalityType];
            
            if (!plantData) {
                console.error('[Result] æ¤ç‰©æ•°æ®ç¼ºå¤±:', personalityType);
                showToast('ç»“æœè®¡ç®—å‡ºé”™ï¼Œè¯·é‡æ–°æµ‹è¯•', 5000);
                return;
            }
            
            document.getElementById('testScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            
            document.getElementById('plantIcon').textContent = plantData.icon;
            document.getElementById('plantName').textContent = plantData.name;
            document.getElementById('plantLatin').textContent = plantData.latin;
            document.getElementById('personalityType').textContent = `${personalityType} - ${getTypeDescription(personalityType)}`;
            document.getElementById('description').textContent = plantData.description;
            
            const traitsList = document.getElementById('traitsList');
            traitsList.innerHTML = '';
            plantData.traits.forEach(trait => {
                const tag = document.createElement('span');
                tag.className = 'trait-tag';
                tag.textContent = trait;
                traitsList.appendChild(tag);
            });
            
            document.getElementById('scientificBasis').textContent = plantData.scientificBasis;
            
            // æ¸…é™¤æœ¬åœ°è¿›åº¦
            clearProgress();
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo(0, 0);
        }

        // è·å–MBTIç±»å‹æè¿°
        function getTypeDescription(type) {
            const descriptions = {
                'INTJ': 'å»ºç­‘å¸ˆå‹', 'INTP': 'é€»è¾‘å­¦å®¶å‹', 'ENTJ': 'æŒ‡æŒ¥å®˜å‹', 'ENTP': 'è¾©è®ºå®¶å‹',
                'INFJ': 'æå€¡è€…å‹', 'INFP': 'è°ƒåœè€…å‹', 'ENFJ': 'ä¸»äººå…¬å‹', 'ENFP': 'ç«é€‰è€…å‹',
                'ISTJ': 'ç‰©æµå¸ˆå‹', 'ISFJ': 'å®ˆå«è€…å‹', 'ESTJ': 'æ€»ç»ç†å‹', 'ESFJ': 'æ‰§æ”¿å®˜å‹',
                'ISTP': 'é‰´èµå®¶å‹', 'ISFP': 'æ¢é™©å®¶å‹', 'ESTP': 'ä¼ä¸šå®¶å‹', 'ESFP': 'è¡¨æ¼”è€…å‹'
            };
            return descriptions[type] || 'æœªçŸ¥ç±»å‹';
        }

        // é‡æ–°æµ‹è¯•
        function restartTest() {
            trackEvent('test_restart');
            
            currentQuestion = 0;
            answers = {};
            selectedQuestions = [];
            clearProgress();
            
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
            
            window.scrollTo(0, 0);
        }

        // åˆ†äº«ç»“æœ
        function shareResult() {
            const type = calculateResult();
            const plant = plantPersonalities[type];
            
            if (!plant) {
                showToast('åˆ†äº«å¤±è´¥ï¼Œè¯·é‡è¯•');
                return;
            }
            
            const shareText = `æˆ‘çš„å†…åœ¨æ¤ç‰©æ˜¯${plant.name}ï¼ˆ${type}ï¼‰ï¼ğŸŒ± ${plant.traits.slice(0, 3).join('ã€')}ã€‚å¿«æ¥æµ‹æµ‹ä½ æ˜¯å“ªç§æ¤ç‰©å§ï½`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'æˆ‘çš„æ¤ç‰©äººæ ¼åˆ†æç»“æœ',
                    text: shareText,
                    url: window.location.href
                }).then(() => {
                    trackEvent('share_success', { method: 'native' });
                }).catch(() => {
                    fallbackShare(shareText);
                });
            } else {
                fallbackShare(shareText);
            }
        }

        // å¤‡é€‰åˆ†äº«æ–¹æ¡ˆ
        function fallbackShare(text) {
            const shareContent = text + ' ' + window.location.href;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(shareContent).then(() => {
                    showToast('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¿«å»åˆ†äº«å§ï¼');
                    trackEvent('share_success', { method: 'clipboard' });
                }).catch(() => {
                    const textarea = document.createElement('textarea');
                    textarea.value = shareContent;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    showToast('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¿«å»åˆ†äº«å§ï¼');
                });
            } else {
                showToast('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåˆ†äº«åŠŸèƒ½');
            }
        }

        // ==================== é”®ç›˜å¿«æ·é”® ====================
        let keyThrottleTimer;
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('testScreen').style.display === 'none') return;
            
            if (keyThrottleTimer) return;
            
            if (e.key === 'ArrowLeft' && !document.getElementById('prevBtn').disabled) {
                previousQuestion();
                keyThrottleTimer = setTimeout(() => keyThrottleTimer = null, 200);
            } else if ((e.key === 'ArrowRight' || e.key === 'Enter') && !document.getElementById('nextBtn').disabled) {
                nextQuestion();
                keyThrottleTimer = setTimeout(() => keyThrottleTimer = null, 200);
            } else if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option');
                if (options[optionIndex]) {
                    options[optionIndex].click();
                }
            }
        });
        // =================================================

        // ==================== é¡µé¢åŠ è½½ ====================
        window.addEventListener('load', async () => {
            // å…ˆåŠ è½½é¢˜åº“
            await loadQuestions();
            
            // æ£€æŸ¥å¯æ¢å¤è¿›åº¦
            checkRestoreProgress();
            
            // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶ä¿å­˜è¿›åº¦
            document.addEventListener('visibilitychange', () => {
                if (document.visibilityState === 'hidden' && Object.keys(answers).length > 0) {
                    saveProgress();
                }
            });
            
            // ç¦»å¼€é¡µé¢ä¿æŠ¤
            window.addEventListener('beforeunload', (e) => {
                const answeredCount = Object.keys(answers).length;
                const totalCount = selectedQuestions.length;
                
                if (totalCount > 0 && answeredCount > 0 && answeredCount < totalCount) {
                    const progress = Math.floor(answeredCount / totalCount * 100);
                    e.preventDefault();
                    e.returnValue = `æµ‹è¯•è¿›åº¦å°†ä¸¢å¤±ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿï¼ˆå·²å®Œæˆ ${progress}%ï¼‰`;
                }
            });
            
            // æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬ä¿¡æ¯
            console.log(`[System] æ¤ç‰©äººæ ¼åˆ†æç³»ç»Ÿå·²å°±ç»ª | ç‰ˆæœ¬: ${questionVersion} | é¢˜åº“: ${allQuestions.length}é¢˜`);
        });
        // =================================================
    </script>
</body>
</html>
